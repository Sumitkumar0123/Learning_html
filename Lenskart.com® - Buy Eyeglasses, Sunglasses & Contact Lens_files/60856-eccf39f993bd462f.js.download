"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60856],{37022:function(e,t,r){var n=r(92777),o=r(82262),i=r(10748),s=r(45959),u=r(63553),a=r(37247),c=r(59499),l=r(67294),d=r(85893);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,a.Z)(e);if(t){var o=(0,a.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var v=function(e){(0,s.Z)(r,e);var t=f(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return e=t.call.apply(t,[this].concat(s)),(0,c.Z)((0,i.Z)(e),"state",{hasError:!1}),e}return(0,o.Z)(r,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?(0,d.jsx)("h1",{children:"Sorry.. there was an error"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),r}(l.Component);t.Z=l.memo(v)},59855:function(e,t,r){var n=r(59499),o=r(16835),i=r(67294),s=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){return function(t){var r=(0,i.useState)(!1),n=r[0],u=r[1],c=(0,i.useRef)(null),l=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(c.current){var e=new IntersectionObserver((function(t){(0,o.Z)(t,1)[0].isIntersecting&&(u(!0),e.disconnect())}),{threshold:.1,rootMargin:"0px 0px 50px 0px"});return e.observe(c.current),function(){return e.disconnect()}}}),[c]),(0,i.useEffect)((function(){if(n&&c.current){var e=c.current.querySelectorAll("img[data-src]:not([src])"),t=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var r=e.target,n=r.getAttribute("data-src");r.setAttribute("src",n||""),t.unobserve(r)}}))}),{threshold:.1});e.forEach((function(e){t.observe(e)}))}return function(){}}),[n]),(0,s.jsx)("div",{ref:c,children:n&&(0,s.jsx)(e,a({ref:l},t))})}}},80539:function(e,t,r){var n=r(50029),o=r(87794),i=r.n(o),s=r(67294),u=r(41248),a=r(23058),c=r(80473),l=r(11776),d=r(84313),f=r(84627),v=r(58645),p=r(1882),h=r(72914),g=r(60719);function b(e){return/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/i.test(e)}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,s.useState)(null),o=r[0],m=r[1],y=(0,s.useState)(!1),I=y[0],E=y[1],x=(0,u.v9)((function(e){return e.userInfo})),k=x.userLoading,w=x.userError,O=(0,u.v9)((function(e){return e.pageInfo.subdirectoryPath})),S=(0,u.I0)();function j(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,n.Z)(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setMethod(g.S.POST),e.next=3,(0,a.createNewSession)(t);case 3:if(r=e.sent,n=r.data,!r.error.isError){e.next=8;break}return e.abrupt("return",{notFound:!0});case 8:(0,f.d8)(l.B$,n.sessionId),t.resetHeaders(),t.sessionToken=n.sessionId,t.setHeaders(f.zb).setMethod(g.S.GET);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.useEffect)((function(){if(t)return(0,n.Z)(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,d.aN)({}),(0,f.h2)(l.B$)){e.next=6;break}return e.next=5,j(t);case 5:S((0,p.fc)(!1));case 6:if(!b(r="".concat((0,f.ej)(l.B$)))){e.next=25;break}return""===t.sessionToken&&(t.sessionToken=r),t.resetHeaders(),t.setHeaders(f.zb).setMethod(g.S.GET),e.next=13,(0,c.validateSession)(t);case 13:if(n=e.sent,o=n.data,!n.error.isError){e.next=22;break}return e.next=19,j(t);case 19:m({id:"".concat((0,f.ej)(l.B$)),wishlist:[],isLoggedIn:!1}),e.next=23;break;case 22:m(o.customerInfo||null);case 23:e.next=28;break;case 25:return e.next=27,j(t);case 27:m({id:"".concat((0,f.ej)(l.B$)),wishlist:[],isLoggedIn:!1});case 28:case"end":return e.stop()}}),e)})))(),function(){}}),[S,t]),(0,s.useEffect)((function(){t&&!k&&w&&(0,n.Z)(i().mark((function e(){var t,r,n,o,s,u,a,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,d.aN)({}),r="".concat((0,f.ej)(l.B$)),""===t.sessionToken&&(t.sessionToken=r),t.resetHeaders(),t.setHeaders(f.zb).setMethod(g.S.GET),e.next=7,(0,c.validateSession)(t);case 7:if(n=e.sent,o=n.data,s=n.error,u=null===o||void 0===o?void 0:o.customerInfo,!s.isError){e.next=23;break}return e.next=14,j(t);case 14:return S((0,p.fc)(!1)),t.sessionToken=r,e.next=18,(0,c.validateSession)(t);case 18:a=e.sent,v=a.data,m(v.customerInfo||null),e.next=24;break;case 23:m(o.customerInfo||null);case 24:S((0,p.Al)({userError:!1,userErrorMessage:"",userLoading:!1,sessionId:null===u||void 0===u?void 0:u.id,isLogin:!(null===u||void 0===u||!u.isLoggedIn),mobileNumber:null!==u&&void 0!==u&&u.customerMobile?null===u||void 0===u?void 0:u.customerMobile:null,email:null!==u&&void 0!==u&&u.customerEmail?null===u||void 0===u?void 0:u.customerEmail:null,cartId:null!==u&&void 0!==u&&u.cartIds?null===u||void 0===u?void 0:u.cartIds:null,isWhatsappOptingLoading:!1,whatsAppOptingStatus:!1,isGuestFlow:!1,guestEmail:"",guestNumber:null,whatsAppChecked:!0,loyaltyData:{tierName:"",tierLabel:"",loyaltyExpiryDate:Date.now()},prescription:{lastPrescriptionDate:""},frameSize:{createdAt:"",imageUrl:"",faceShape:""}}));case 25:case"end":return e.stop()}}),e)})))()}),[S,null===o||void 0===o?void 0:o.id,k,w,null===o||void 0===o?void 0:o.isLoggedIn,null===o||void 0===o?void 0:o.customerMobile,null===o||void 0===o?void 0:o.customerEmail,null===o||void 0===o?void 0:o.cartIds,null===o||void 0===o?void 0:o.itemsCount,t]),(0,s.useEffect)((function(){if(t){if(null!==o&&void 0!==o&&o.id&&!I){var r,n={sessionId:null===o||void 0===o?void 0:o.id,applyWallet:null!==(r=(0,f.ej)("lkCashApplied"))&&void 0!==r&&r};S((0,v.OR)(n)),S((0,h.BW)({sessionId:(0,f.ej)(l.B$),subdirectoryPath:O})),E(!0)}null!==o&&void 0!==o&&o.id&&null!==o&&void 0!==o&&o.isLoggedIn?S((0,p.r3)({sessionId:null===o||void 0===o?void 0:o.id,pageType:e})):null===o||void 0===o||!o.id||null!==o&&void 0!==o&&o.isLoggedIn||S((0,p.fc)(!1))}}),[null===o||void 0===o?void 0:o.id,null===o||void 0===o?void 0:o.isLoggedIn,null===o||void 0===o?void 0:o.wishlist,S,e]),{userSessionId:!(null===o||void 0===o||!o.id),isLoggedInUser:!(null===o||void 0===o||!o.isLoggedIn)}}}}]);